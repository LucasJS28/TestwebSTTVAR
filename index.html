<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto STTVAR - Presentaci贸n Definitiva</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&family=Inter:wght@400;500;600&family=Courier+Prime:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
    :root {
        --color-background: #0D1117;
        --color-surface: #161B22;
        --color-border: #30363d;
        --color-primary: #e6edf3;
        --color-secondary: #a0b0c1;
        --color-accent-start: #7C3AED;
        --color-accent-end: #EC4899;
        --color-glow: rgba(124, 58, 237, 0.3);
        --shadow-color: rgba(0, 0, 0, 0.5);
        --border-radius-md: 10px;
        --border-radius-lg: 16px;
    }

    body.light-mode {
        --color-background: #f8f9fa;
        --color-surface: #ffffff;
        --color-border: #dee2e6;
        --color-primary: #212529;
        --color-secondary: #495057;
        --shadow-color: rgba(0, 0, 0, 0.1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--color-background);
        color: var(--color-secondary);
        line-height: 1.7;
        overflow-x: hidden;
        transition: background-color 0.4s ease, color 0.4s ease;
    }
    body.lightbox-active, body.modal-active { overflow: hidden; }
    
    .cursor { display: none; position: fixed; width: 20px; height: 20px; border-radius: 50%; background: var(--color-accent-start); opacity: 0.5; pointer-events: none; transform: translate(-50%, -50%); z-index: 9999; transition: width 0.3s, height 0.3s, opacity 0.3s; }
    .cursor-glow { display: none; position: fixed; width: 60px; height: 60px; border-radius: 50%; background: radial-gradient(circle, var(--color-glow) 0%, transparent 70%); pointer-events: none; transform: translate(-50%, -50%); z-index: 9998; }
    body.modal-active .cursor,
    body.modal-active .cursor-glow {
        display: none !important;
    }
    @media (pointer: fine) { body:hover .cursor, body:hover .cursor-glow { display: block; } a:hover ~ .cursor, button:hover ~ .cursor, .card:hover ~ .cursor, .bento-card:hover ~ .cursor { width: 40px; height: 40px; opacity: 0.2; } }

    .background-aurora { 
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
        background: linear-gradient(300deg, var(--color-accent-start), var(--color-accent-end), #0d1117, #082f49); 
        background-size: 300% 300%; animation: gradientAnimation 25s ease infinite; 
        filter: blur(80px) opacity(0.1);
        z-index: -2;
        transition: opacity 0.5s ease;
    }
    body.light-mode .background-aurora { opacity: 0; }
    @keyframes gradientAnimation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

    #particles-js { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; transition: opacity 0.5s ease; }
    body.light-mode #particles-js { opacity: 0; pointer-events: none; }
    
    .light-mode-bg { display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; overflow: hidden; z-index: -2; opacity: 0; transition: opacity 0.5s ease-in-out; }
    body.light-mode .light-mode-bg { opacity: 1; }
    .light-mode-bg::before, .light-mode-bg::after { content: ''; position: absolute; width: 60vw; height: 60vw; min-width: 400px; min-height: 400px; border-radius: 50%; filter: blur(100px); opacity: 0.15; will-change: transform; }
    .light-mode-bg::before { background: radial-gradient(circle, var(--color-accent-start), transparent 60%); top: -20%; left: -20%; animation: moveBlob1 30s infinite alternate ease-in-out; }
    .light-mode-bg::after { background: radial-gradient(circle, var(--color-accent-end), transparent 60%); bottom: -20%; right: -20%; animation: moveBlob2 35s infinite alternate ease-in-out -5s; }
    @keyframes moveBlob1 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(10vw, 20vh) rotate(180deg); } }
    @keyframes moveBlob2 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(-15vw, -10vh) rotate(-180deg); } }

    .container { width: 90%; max-width: 1100px; margin: 0 auto; padding: 100px 20px; position: relative; z-index: 1; }
    section { padding-top: 100px; }
    img { max-width: 100%; height: auto; display: block; }
    
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-track { background: var(--color-background); }
    ::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 5px; }
    ::-webkit-scrollbar-thumb:hover { background: #4a5568; }

    h1, h2, h3 { font-family: 'Poppins', sans-serif; color: var(--color-primary); font-weight: 700; }
    
    h2.section-title { font-size: clamp(2rem, 5vw, 2.8rem); margin-bottom: 60px; text-align: center; position: relative; }
    h2.section-title::after { content: ''; position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); width: 70px; height: 4px; background-image: linear-gradient(to right, var(--color-accent-start), var(--color-accent-end)); border-radius: 2px; }
    h3 { font-size: 1.3rem; margin-bottom: 15px; font-weight: 600; }
    .text-gradient { background-image: linear-gradient(45deg, var(--color-accent-start), var(--color-accent-end)); -webkit-background-clip: text; background-clip: text; color: transparent; }
    p.section-subtitle { text-align: center; max-width: 800px; margin: -40px auto 50px auto; font-size: 1.15rem; line-height: 1.8; }
    
    .navbar { background-color: transparent; position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid transparent; transition: background-color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease, padding 0.4s ease; }
    .navbar.scrolled { padding: 10px 5%; background-color: rgba(13, 17, 23, 0.85); backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px); border-bottom: 1px solid var(--color-border); box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3); }
    body.light-mode .navbar.scrolled { background-color: rgba(255, 255, 255, 0.85); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.07); }
    .nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
    .nav-logo .soundwave-icon { width: 30px; height: 30px; color: var(--color-accent-start); transition: color 0.4s ease, transform 0.4s ease; }
    @keyframes pulse { 0%, 100% { transform: scaleY(0.2); } 50% { transform: scaleY(1); } }
    .soundwave-bar { fill: currentColor; transform-origin: bottom; animation: pulse 1.5s infinite ease-in-out; }
    .soundwave-bar:nth-child(2) { animation-delay: -0.2s; } .soundwave-bar:nth-child(3) { animation-delay: -0.4s; } .soundwave-bar:nth-child(4) { animation-delay: -0.6s; }
    .nav-logo:hover .soundwave-icon { color: var(--color-accent-end); transform: rotate(-5deg) scale(1.1); }
    .nav-logo span { font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1.7rem; }
    .nav-right-group { display: flex; align-items: center; gap: 15px; }
    .nav-links { list-style: none; display: flex; align-items: center; gap: 40px; }
    .nav-links a { color: var(--color-secondary); text-decoration: none; font-weight: 500; font-size: 1.05rem; position: relative; transition: color 0.3s ease; }
    .nav-links a:hover, .nav-links a.active { color: var(--color-primary); }
    .nav-links a::after { content: ''; position: absolute; bottom: -6px; left: 0; width: 100%; height: 2px; background-image: linear-gradient(to right, var(--color-accent-start), var(--color-accent-end)); transform: scaleX(0); transform-origin: bottom right; transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1); }
    .nav-links a:hover::after, .nav-links a.active::after { transform: scaleX(1); transform-origin: bottom left; }
    .nav-toggle { display: none; }
    .theme-toggle { background-color: transparent; border: 1px solid transparent; cursor: pointer; color: var(--color-secondary); font-size: 1.3rem; width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; position: relative; overflow: hidden; transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, transform 0.3s ease; border-radius: 8px; }
    .theme-toggle:hover { color: var(--color-primary); background-color: var(--color-surface); border-color: var(--color-border); transform: scale(1.1); }
    .theme-toggle i { position: absolute; transition: transform 0.4s cubic-bezier(0.45, 1.25, 0.55, 1), opacity 0.3s ease; }
    .theme-toggle .fa-sun { transform: translateY(150%) rotate(45deg); opacity: 0; }
    .theme-toggle .fa-moon { transform: translateY(0) rotate(0); opacity: 1; }
    body.light-mode .theme-toggle .fa-sun { transform: translateY(0) rotate(0); opacity: 1; }
    body.light-mode .theme-toggle .fa-moon { transform: translateY(-150%) rotate(-45deg); opacity: 0; }

    .hero { min-height: 100vh; display: flex; align-items: center; padding-top: 80px; }
    .hero-content { display: grid; grid-template-columns: repeat(2, 1fr); align-items: center; gap: 4rem; }
    .hero-text { text-align: left; }
    .hero-title-wrapper { display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1rem; }
    .hero-title-wrapper .hero-logo-icon { width: clamp(50px, 10vw, 80px); height: clamp(50px, 10vw, 80px); color: var(--color-primary); }
    .hero-title-wrapper .hero-logo-icon .soundwave-bar { fill: url(#logo-gradient); }
    .main-title-container { display: flex; align-items: center; gap: 1rem; }
    h1.main-title { font-size: clamp(3rem, 10vw, 5rem); line-height: 1; font-weight: 900; text-shadow: 0 0 20px var(--color-glow); letter-spacing: -2px; }
    .title-blinking-cursor { width: 6px; height: clamp(3rem, 10vw, 4.5rem); background-image: linear-gradient(var(--color-accent-end), var(--color-accent-start)); border-radius: 3px; animation: blink 1.2s infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    .hero-text .hero-tagline { font-family: 'Poppins', sans-serif; font-weight: 700; font-size: clamp(1.8rem, 4vw, 2.5rem); line-height: 1.2; margin-bottom: 1.5rem; }
    .hero-text p { font-size: 1.1rem; max-width: 500px; margin-bottom: 2rem; color: var(--color-secondary); }
    .cta-buttons { display: flex; gap: 15px; justify-content: flex-start; flex-wrap: wrap; }
    .creator-credit { margin-top: 2.5rem; font-size: 0.95rem; color: var(--color-secondary); }
    .creator-credit a { font-family: 'Poppins', sans-serif; font-weight: 600; color: var(--color-primary); text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: color 0.3s ease; }
    .creator-credit a:hover { color: var(--color-accent-start); }
    .creator-credit a .fa-github { font-size: 1.2rem; }
    .hero-visual { position: relative; }
    .hero-visual .carousel-container { transform: perspective(1200px) rotateY(-15deg) rotateX(2deg) scale(1.05); box-shadow: 0px 30px 60px -10px var(--shadow-color); transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); }
    .hero-visual .carousel-container:hover { transform: perspective(1200px) rotateY(-10deg) rotateX(1deg) scale(1.08); }
    @keyframes slideInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
    @keyframes slideInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
    .hero-text > * { opacity: 0; animation: slideInLeft 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
    .hero-title-wrapper { animation-delay: 0.2s; }
    .hero-tagline { animation-delay: 0.4s; }
    .hero-text p { animation-delay: 0.6s; }
    .cta-buttons { animation-delay: 0.8s; }
    .creator-credit { animation-delay: 1s; }
    .hero-visual { opacity: 0; animation: slideInRight 0.8s cubic-bezier(0.25, 1, 0.5, 1) 0.4s forwards; }

    .btn { display: inline-flex; align-items: center; justify-content: center; gap: 10px; padding: 14px 32px; font-family: 'Poppins', sans-serif; font-size: 1rem; font-weight: 600; border-radius: 50px; text-decoration: none; position: relative; overflow: hidden; z-index: 1; transition: transform 0.3s ease, box-shadow 0.3s ease; border: none; cursor: pointer; }
    .btn i { transition: transform 0.3s ease; }
    .btn:hover i { transform: scale(1.1) rotate(-5deg); }
    .btn:active { transform: translateY(1px) scale(0.98); }
    .btn-primary { background: linear-gradient(45deg, var(--color-accent-start), var(--color-accent-end)); color: white; box-shadow: 0 8px 25px -5px var(--color-glow), inset 0 -1px 2px rgba(0,0,0,0.2); }
    .btn-primary:hover { transform: translateY(-4px) scale(1.03); box-shadow: 0 12px 30px -5px var(--color-glow); }
    .btn-primary::before { content: ''; position: absolute; top: 0; left: -100%; width: 75%; height: 100%; background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%); transform: skewX(-25deg); transition: left 0.8s cubic-bezier(0.23, 1, 0.32, 1); }
    .btn-primary:hover::before { left: 125%; }
    .btn-secondary { background-color: var(--color-surface); color: var(--color-primary); border: 1px solid var(--color-border); }
    .btn-secondary > span { position: relative; z-index: 2; transition: color 0.4s ease; }
    .btn-secondary::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, var(--color-accent-start), var(--color-accent-end)); z-index: 1; transform: scaleX(0); transform-origin: left; transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1); }
    .btn-secondary:hover::before { transform: scaleX(1); }
    .btn-secondary:hover { border-color: transparent; }
    .btn-secondary:hover > span { color: white; }

    .bento-grid { display: grid; gap: 20px; grid-template-columns: repeat(3, 1fr); grid-auto-rows: minmax(150px, auto); }
    .bento-item { grid-column: span 1; grid-row: span 1; transition: transform 0.3s ease; }
    .bento-item:hover { transform: scale(1.03); }
    .bento-item:nth-child(1) { grid-column: span 2; grid-row: span 2; }
    .bento-item:nth-child(5) { grid-column: span 2; grid-row: span 2; }
    .bento-card { background-color: var(--color-surface); padding: 30px; border-radius: var(--border-radius-lg); border: 1px solid var(--color-border); height: 100%; display: flex; flex-direction: column; justify-content: space-between; position: relative; overflow: hidden; }
    .bento-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.08), transparent 40%); opacity: 0; transition: opacity 0.5s; pointer-events: none; }
    .bento-card:hover::before { opacity: 1; }
    body.light-mode .bento-card:hover::before { display: none; }
    .bento-card .icon { color: var(--color-accent-start); font-size: 1.8rem; margin-bottom: 15px; }
    
    .carousel-container { position: relative; width: 100%; border-radius: var(--border-radius-lg); overflow: hidden; border: 1px solid var(--color-border); aspect-ratio: 16 / 9; background-color: #000; }
    .carousel-slides { display: flex; transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); height: 100%; }
    .carousel-slide { flex: 1 0 100%; cursor: pointer; }
    .carousel-slide img { width: 100%; height: 100%; display: block; object-fit: contain; }
    .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); width: 40px; height: 40px; background-color: rgba(13, 17, 23, 0.7); color: var(--color-primary); border: 1px solid var(--color-border); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s ease, transform 0.3s ease; backdrop-filter: blur(5px); }
    .carousel-nav:hover { background-color: var(--color-surface); transform: translateY(-50%) scale(1.1); }
    .carousel-nav.prev { left: 15px; } .carousel-nav.next { right: 15px; }
    .carousel-dots { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; }
    .carousel-dot { width: 10px; height: 10px; border-radius: 50%; background-color: transparent; border: 2px solid var(--color-primary); cursor: pointer; transition: background-color 0.3s ease, transform 0.3s ease; }
    .carousel-dot.active { background-color: var(--color-accent-start); border-color: var(--color-accent-start); transform: scale(1.2); }
    
    .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.4s ease, visibility 0.4s ease; }
    .lightbox.active { opacity: 1; visibility: visible; }
    .lightbox-content { position: relative; max-width: 90vw; max-height: 90vh; display: flex; flex-direction: column; align-items: center; justify-content: center; transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
    .lightbox.active .lightbox-content { transform: scale(1); }
    .lightbox-image { max-width: 100%; max-height: calc(90vh - 80px); border-radius: var(--border-radius-lg); box-shadow: 0 20px 40px rgba(0,0,0,0.5); margin-bottom: 15px; }
    .lightbox-caption { color: var(--color-primary); font-size: 1rem; text-align: center; font-weight: 500; }
    .lightbox-close { position: absolute; top: -15px; right: -15px; width: 45px; height: 45px; font-size: 2.5rem; font-weight: 300; color: var(--color-primary); background: none; border: none; cursor: pointer; transition: transform 0.3s ease, color 0.3s ease; text-shadow: 0 0 10px #000; }
    .lightbox-close:hover { transform: rotate(90deg); color: var(--color-accent-start); }
    .lightbox-nav { position: absolute; top: 50%; transform: translateY(-50%); width: 50px; height: 50px; font-size: 1.5rem; background-color: rgba(13, 17, 23, 0.5); color: var(--color-primary); border: 1px solid var(--color-border); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s ease, transform 0.3s ease; backdrop-filter: blur(5px); }
    .lightbox-nav:hover { background-color: var(--color-surface); transform: translateY(-50%) scale(1.1); }
    .lightbox-prev { left: -80px; } .lightbox-next { right: -80px; }
    .architecture-diagram { display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 50px; }
    .diagram-box { background-color: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--border-radius-lg); padding: 30px; text-align: center; width: 250px; transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1); }
    .diagram-box:hover { transform: translateY(-8px); box-shadow: 0 15px 30px var(--shadow-color); border-color: var(--color-accent-start); }
    .diagram-box i { font-size: 3rem; margin-bottom: 15px; display: block; background-image: linear-gradient(45deg, var(--color-accent-start), var(--color-accent-end)); -webkit-background-clip: text; background-clip: text; color: transparent; }
    .diagram-box h4 { font-family: 'Poppins', sans-serif; font-size: 1.1rem; color: var(--color-primary); margin: 0; }
    .diagram-arrow { font-size: 3rem; color: var(--color-secondary); }
    .timeline { position: relative; max-width: 800px; margin: 50px auto 0 auto; }
    .timeline::after { content: ''; position: absolute; width: 3px; background-image: linear-gradient(to bottom, var(--color-accent-start), var(--color-accent-end)); top: 0; bottom: 0; left: 50%; margin-left: -1.5px; border-radius: 3px; }
    .timeline-item::after { content: ''; position: absolute; width: 18px; height: 18px; right: -9px; background-color: var(--color-background); border: 3px solid var(--color-accent-start); top: 30px; border-radius: 50%; z-index: 1; transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1); }
    .timeline-item:hover::after { background-color: var(--color-accent-end); transform: scale(1.3); box-shadow: 0 0 15px 0 var(--color-accent-end); }
    .timeline-item { padding: 10px 40px; position: relative; width: 50%; }
    .timeline-item.left { left: 0; } .timeline-item.right { left: 50%; }
    .timeline-item.right::after { left: -9px; }
    .timeline-content { padding: 30px; background: var(--color-surface); position: relative; border-radius: var(--border-radius-lg); border: 1px solid var(--color-border); transition: all 0.4s ease; }
    .timeline-item:hover .timeline-content { border-color: var(--color-accent-start); box-shadow: 0 8px 25px var(--shadow-color); transform: translateY(-5px); }
    .step { display: flex; align-items: flex-start; gap: 25px; margin-bottom: 20px; padding: 25px; border-radius: var(--border-radius-lg); border: 1px solid var(--color-border); transition: all 0.3s ease; background-color: transparent; }
    .step:hover { background-color: var(--color-surface); transform: scale(1.02); }
    .step-number { font-size: 1.5rem; font-weight: 700; color: white; background-image: linear-gradient(to right, var(--color-accent-start), var(--color-accent-end)); min-width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .step-content a { color: var(--color-accent-start); text-decoration: none; font-weight: 500; transition: color 0.3s ease; }
    .step-content a:hover { color: var(--color-accent-end); text-decoration: underline; }
    .code-block-wrapper { position: relative; margin-top: 15px; }
    .code-block { background-color: var(--color-background); border: 1px solid var(--color-border); padding: 15px; border-radius: var(--border-radius-md); font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; color: #c9d1d9; white-space: pre-wrap; transition: all 0.3s ease; }
    .copy-btn { position: absolute; top: 10px; right: 10px; background: var(--color-surface); border: 1px solid var(--color-border); color: var(--color-secondary); border-radius: 6px; padding: 5px 10px; font-size: 0.8rem; cursor: pointer; transition: all 0.2s ease; opacity: 0.5; }
    .code-block-wrapper:hover .copy-btn { opacity: 1; }
    .copy-btn:hover { background-color: var(--color-background); color: var(--color-primary); }
    .copy-btn.copied { border-color: var(--color-accent-start); color: var(--color-accent-start); }
    body.light-mode .code-block { color: var(--color-primary); background: #e9ecef; border-color: #ced4da;}
    .footer { text-align: center; padding: 50px 20px; border-top: 1px solid var(--color-border); transition: border-color 0.3s ease; }
    .footer p { margin-bottom: 20px; }
    .footer-socials a { display: inline-block; color: var(--color-secondary); font-size: 1.5rem; margin: 0 15px; transition: color 0.3s ease, transform 0.3s ease; }
    .footer-socials a:hover { color: var(--color-accent-start); transform: translateY(-3px) scale(1.1); }
    .fade-in { opacity: 0; transform: translateY(30px); filter: blur(5px); transition: opacity 0.6s ease-out, transform 0.6s ease-out, filter 0.6s ease-out; }
    .fade-in.visible { opacity: 1; transform: translateY(0); filter: blur(0); }
    
    /* ESTILOS DEL MODAL DE DEMO */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 3000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    .modal-overlay.active {
        opacity: 1;
        visibility: visible;
    }
    .modal-content {
        background-color: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: var(--border-radius-lg);
        width: 100%;
        max-width: 1400px;
        height: 90vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 20px 50px var(--shadow-color);
        transform: scale(0.9);
        transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        overflow: hidden;
    }
    .modal-overlay.active .modal-content {
        transform: scale(1);
    }
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 25px;
        border-bottom: 1px solid var(--color-border);
        flex-shrink: 0;
    }
    .modal-header h3 {
        margin-bottom: 0;
        font-size: 1.2rem;
    }
    .modal-close-btn {
        background: none;
        border: none;
        color: var(--color-secondary);
        font-size: 2rem;
        font-weight: 300;
        line-height: 1;
        cursor: pointer;
        transition: transform 0.3s ease, color 0.3s ease;
    }
    .modal-close-btn:hover {
        color: var(--color-primary);
        transform: rotate(90deg);
    }
    .modal-body {
        flex-grow: 1;
        padding: 0;
        overflow: hidden;
    }
    #demo-iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
    
    @media screen and (max-width: 992px) {
        .hero-content { grid-template-columns: 1fr; text-align: center; gap: 2rem; }
        .hero-text { text-align: center; order: 2; display: flex; flex-direction: column; align-items: center; }
        .hero-title-wrapper { justify-content: center; }
        .hero-text h1, .hero-text p { max-width: 100%; margin-left: auto; margin-right: auto; }
        .cta-buttons { justify-content: center; }
        .hero-visual { order: 1; }
        .hero-visual .carousel-container { transform: none; }
    }
    @media screen and (max-width: 1024px) { .bento-grid { grid-template-columns: repeat(2, 1fr); } .bento-item:nth-child(n) { grid-column: span 1; } .bento-item:nth-child(1), .bento-item:nth-child(5) { grid-column: span 2; } }
    @media screen and (max-width: 768px) { .nav-links { position: fixed; top: 0; right: 0; width: 100%; height: 100%; background-color: var(--color-background); flex-direction: column; align-items: center; justify-content: center; gap: 40px; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1); z-index: 1001; } .nav-links.active { transform: translateX(0); } .nav-links a { font-size: 1.5rem; } .nav-toggle { display: block; z-index: 1002;} .architecture-diagram { flex-direction: column; } .diagram-arrow { transform: rotate(90deg); margin: 10px 0; } .timeline::after { left: 9px; } .timeline-item { width: 100%; padding-left: 50px; padding-right: 0; } .timeline-item.right { left: 0; } .timeline-item.left::after, .timeline-item.right::after { left: 0; } .cta-buttons { flex-direction: column; align-items: stretch; } .btn { width: 100%; text-align: center; } .lightbox-nav { display: none; } .bento-grid, .bento-item:nth-child(n) { grid-template-columns: 1fr; grid-column: span 1; grid-row: span 1; } }
</style>
</head>
<body>
<svg width="0" height="0" style="position:absolute">
  <defs>
    <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:var(--color-accent-start);stop-opacity:1" />
      <stop offset="100%" style="stop-color:var(--color-accent-end);stop-opacity:1" />
    </linearGradient>
  </defs>
</svg>

<div class="light-mode-bg"></div>
<div class="cursor"></div>
<div class="cursor-glow"></div>
<div class="background-aurora"></div>
<div id="particles-js"></div>

<nav class="navbar" id="navbar">
    <a href="#hero" class="nav-logo">
        <svg class="soundwave-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <rect class="soundwave-bar" x="2" y="6" width="4" height="12" rx="2"></rect>
            <rect class="soundwave-bar" x="8" y="2" width="4" height="20" rx="2"></rect>
            <rect class="soundwave-bar" x="14" y="4" width="4" height="16" rx="2"></rect>
            <rect class="soundwave-bar" x="20" y="8" width="4" height="8" rx="2"></rect>
        </svg>
        <span class="text-gradient">STTVAR</span>
    </a>
    <div class="nav-right-group">
         <ul class="nav-links" id="nav-menu">
            <li><a href="#que-es">驴Qu茅 es?</a></li>
            <li><a href="#como-funciona">C贸mo Funciona</a></li>
            <li><a href="#caracteristicas">Caracter铆sticas</a></li>
            <li><a href="#evolucion">Evoluci贸n</a></li>
            <li><a href="#instalacion">Instalaci贸n</a></li>
        </ul>
         <button class="theme-toggle" id="theme-toggle" aria-label="Cambiar modo claro/oscuro"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button>
        <button class="nav-toggle" id="nav-toggle" aria-label="Abrir men煤" style="background: none; border: none; font-size: 1.5rem; color: var(--color-primary); cursor: pointer;"><i class="fas fa-bars"></i></button>
    </div>
</nav>

<header id="hero" class="hero container">
    <div class="hero-content">
        <div class="hero-text">
            <div class="hero-title-wrapper">
                <svg class="hero-logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <rect class="soundwave-bar" x="2" y="6" width="4" height="12" rx="2"></rect>
                    <rect class="soundwave-bar" x="8" y="2" width="4" height="20" rx="2"></rect>
                    <rect class="soundwave-bar" x="14" y="4" width="4" height="16" rx="2"></rect>
                    <rect class="soundwave-bar" x="20" y="8" width="4" height="8" rx="2"></rect>
                </svg>
                <div class="main-title-container">
                    <h1 class="main-title">STTVAR</h1>
                    <div class="title-blinking-cursor"></div>
                </div>
            </div>
            
            <h2 class="hero-tagline text-gradient">
                Convierte la voz en conocimiento accesible.
            </h2>
            
            <p>
                La herramienta definitiva de transcripci贸n colaborativa y an谩lisis con IA en tiempo real. Multiplataforma, multiusuario y disponible desde cualquier lugar.
            </p>
            <div class="cta-buttons">
                <a href="https://github.com/LucasJS28/STTVAR" target="_blank" class="btn btn-primary"> <i class="fab fa-github"></i><span>Ver en GitHub</span></a>
                <button id="open-demo-modal" class="btn btn-secondary"><span><i class="fas fa-play-circle"></i> Iniciar Ejemplo</span></button>
            </div>
            <div class="creator-credit">
                Creado por
                <a href="https://github.com/LucasJS28" target="_blank">
                    LucasJS28 <i class="fab fa-github"></i>
                </a>
            </div>
        </div>
        <div class="hero-visual">
             <div id="image-carousel" class="carousel-container">
                <div class="carousel-slides">
                    <div class="carousel-slide" data-description="Men煤 principal web con todas las opciones globales presentadas"> <img src="https://raw.githubusercontent.com/LucasJS28/STTVAR/main/imagenespagina/Menuprincipal.png" alt="Menu principal web"> </div>
                    <div class="carousel-slide" data-description="Chat global en tiempo real con m煤ltiples usuarios conectados"> <img src="https://raw.githubusercontent.com/LucasJS28/STTVAR/main/imagenespagina/Chat.png" alt="Chat global"> </div>
                    <div class="carousel-slide" data-description="Panel de apuntes compartidos por todos los usuarios conectados"> <img src="https://raw.githubusercontent.com/LucasJS28/STTVAR/main/imagenespagina/Apuntescompartidos.png" alt="Panel de apuntes"> </div>
                    <div class="carousel-slide" data-description="Transcripci贸n en vivo con traducci贸n autom谩tica al idioma del usuario"> <img src="https://raw.githubusercontent.com/LucasJS28/STTVAR/main/imagenespagina/pantallacompletatranscripcionenotroidioma.png" alt="Traducci贸n en vivo"> </div>
                    <div class="carousel-slide" data-description="Pantalla de gesti贸n de transcripciones en la aplicaci贸n de escritorio"> <img src="https://raw.githubusercontent.com/LucasJS28/STTVAR/main/imagenespagina/PantallaAdministrativaEscritorio.png" alt="Gesti贸n de transcripciones"> </div>
                </div>
                <button class="carousel-nav prev" aria-label="Anterior"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-nav next" aria-label="Siguiente"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-dots"></div>
            </div>
        </div>
    </div>
</header>

<main>
     <section id="que-es" class="section container">
        <h2 class="section-title">驴Qu茅 es STTVAR?</h2>
        <p class="section-subtitle">STTVAR es un ecosistema completo que transforma cualquier ordenador en un potente servidor de transcripci贸n, permitiendo a m煤ltiples usuarios colaborar en tiempo real desde una sencilla interfaz web, sin importar las barreras del idioma o la distancia.</p>
    </section>

    <section id="como-funciona" class="section container">
        <h2 class="section-title">驴C贸mo Funciona?</h2>
        <p class="section-subtitle">La magia de STTVAR reside en su arquitectura Servidor-Cliente. La aplicaci贸n de escritorio hace todo el trabajo pesado, y la interfaz web sirve como una ventana universal para la colaboraci贸n.</p>
        <div class="architecture-diagram fade-in">
            <div class="diagram-box"> <i class="fas fa-desktop"></i> <h4>Aplicaci贸n Servidor (PC)</h4> </div>
            <div class="diagram-arrow"> <i class="fas fa-long-arrow-alt-right"></i> </div>
            <div class="diagram-box"> <i class="fas fa-users"></i> <h4>Clientes Web (M贸vil, Laptop...)</h4> </div>
        </div>
    </section>
    
    <section id="caracteristicas" class="section container">
        <h2 class="section-title">Caracter铆sticas Estelares</h2>
        <p class="section-subtitle">Una suite de herramientas potentes y colaborativas, dise帽adas para transformar la voz en acci贸n de manera inteligente y accesible.</p>
        <div class="bento-grid fade-in">
            <div class="bento-item"><div class="bento-card"><div><div class="icon"><i class="fas fa-globe"></i></div><h3>Colaboraci贸n Global en Tiempo Real</h3></div><p>Cada usuario elige su idioma y recibe la transcripci贸n traducida en vivo. Colabora a trav茅s del chat y los apuntes compartidos, sin importar d贸nde est茅s.</p></div></div>
            <div class="bento-item"><div class="bento-card"><div class="icon"><i class="fas fa-brain"></i></div><h3>Asistente IA</h3><p>Pregunta sobre el contexto de la transcripci贸n.</p></div></div>
            <div class="bento-item"><div class="bento-card"><div class="icon"><i class="fas fa-microphone-alt"></i></div><h3>Transcripci贸n Dual</h3><p>Detecta y transcribe en espa帽ol o ingl茅s.</p></div></div>
            <div class="bento-item"><div class="bento-card"><div class="icon"><i class="fas fa-share-alt"></i></div><h3>Acceso con 1 Clic</h3><p>Ngrok crea una URL p煤blica para compartir al instante.</p></div></div>
            <div class="bento-item"><div class="bento-card"><div><div class="icon"><i class="fas fa-file-export"></i></div><h3>Gesti贸n y Exportaci贸n</h3></div><p>Desde la aplicaci贸n de escritorio, explora, edita y exporta las transcripciones en PDF, Word o Markdown.</p></div></div>
            <div class="bento-item"><div class="bento-card"><div class="icon"><i class="fas fa-qrcode"></i></div><h3>Conexi贸n por QR</h3><p>nete a la sesi贸n desde tu m贸vil escaneando un c贸digo.</p></div></div>
        </div>
    </section>

    <section id="evolucion" class="section container">
        <h2 class="section-title">Evoluci贸n del Proyecto</h2>
        <div class="timeline">
            <div class="timeline-item left fade-in"><div class="timeline-content"><h3>Fase 1: El N煤cleo</h3><p>Creaci贸n del sistema base de transcripci贸n y el servidor Flask para enviar el texto en tiempo real.</p></div></div>
            <div class="timeline-item right fade-in"><div class="timeline-content"><h3>Fase 2: Mejoras de UI/UX</h3><p>Implementaci贸n de contadores, modo Zen, y la capacidad de tener un panel de apuntes personal.</p></div></div>
            <div class="timeline-item left fade-in"><div class="timeline-content"><h3>Fase 3: Colaboraci贸n</h3><p>A帽adido el chat global para comunicaci贸n entre usuarios y la funcionalidad de compartir apuntes.</p></div></div>
            <div class="timeline-item right fade-in"><div class="timeline-content"><h3>Fase 4: Inteligencia</h3><p>Integraci贸n de un modelo de IA (Ollama) para permitir consultas sobre el texto y acciones r谩pidas.</p></div></div>
            <div class="timeline-item left fade-in"><div class="timeline-content"><h3>Fase 5: Accesibilidad Global</h3><p>Automatizaci贸n de Ngrok para permitir compartir la sesi贸n p煤blicamente con un solo clic.</p></div></div>
        </div>
    </section>

    <section id="instalacion" class="section container">
        <h2 class="section-title">Gu铆a de Instalaci贸n</h2>
        <p class="section-subtitle">Poner en marcha STTVAR es un proceso sencillo. Sigue estos cuatro pasos para tener tu servidor de transcripci贸n funcionando en minutos.</p>
        <div class="fade-in">
            <div class="step"><div class="step-number">1</div><div class="step-content"><h3>Prepara el Reconocimiento de Voz</h3><p>Descarga el modelo en espa帽ol desde <a href="https://alphacephei.com/vosk/models" target="_blank">Vosk Models</a>, descompr铆melo y coloca la carpeta en la ra铆z del proyecto.</p></div></div>
            <div class="step"><div class="step-number">2</div><div class="step-content"><h3>Instala las Dependencias</h3><p>Abre una terminal en la carpeta del proyecto y ejecuta el siguiente comando para instalar todas las librer铆as necesarias.</p><div class="code-block-wrapper"><div class="code-block" data-lang="shell">pip install -r requirements.txt</div><button class="copy-btn" aria-label="Copiar c贸digo"><i class="far fa-copy"></i></button></div></div></div>
            <div class="step"><div class="step-number">3</div><div class="step-content"><h3>Activa la Inteligencia Artificial</h3><p>Instala Ollama desde su <a href="https://ollama.com/" target="_blank">p谩gina oficial</a>. Luego, ejecuta este comando para descargar el modelo de IA que usar谩 la aplicaci贸n.</p><div class="code-block-wrapper"><div class="code-block" data-lang="shell">ollama pull mistral:7b-instruct-q4_K_M</div><button class="copy-btn" aria-label="Copiar c贸digo"><i class="far fa-copy"></i></button></div></div></div>
            <div class="step"><div class="step-number">4</div><div class="step-content"><h3>隆Lanzamiento!</h3><p>Con todo configurado, simplemente ejecuta el archivo principal para iniciar la aplicaci贸n. 隆Listo para transcribir y colaborar!</p><div class="code-block-wrapper"><div class="code-block" data-lang="shell">python main.py</div><button class="copy-btn" aria-label="Copiar c贸digo"><i class="far fa-copy"></i></button></div></div></div>
        </div>
    </section>
</main>

<footer class="footer">
    <p class="fade-in">Desarrollado con  por <b>Lucas Jim茅nez Sep煤lveda (LucasJS28)</b></p>
    <div class="footer-socials fade-in">
        <a href="mailto:lucasjimenezsepulveda@gmail.com" target="_blank" aria-label="Enviar correo electr贸nico"><i class="fas fa-envelope"></i></a>
        <a href="https://github.com/LucasJS28/STTVAR" target="_blank" aria-label="Ver repositorio en GitHub"><i class="fab fa-github"></i></a>
    </div>
</footer>

<div id="lightbox" class="lightbox">
    <div class="lightbox-content">
        <button class="lightbox-close" aria-label="Cerrar">&times;</button>
        <img src="" alt="Imagen ampliada" class="lightbox-image">
        <p class="lightbox-caption"></p>
        <button class="lightbox-nav lightbox-prev" aria-label="Anterior">&#10094;</button>
        <button class="lightbox-nav lightbox-next" aria-label="Siguiente">&#10095;</button>
    </div>
</div>

<div id="demo-modal-overlay" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Demostraci贸n Interactiva de STTVAR</h3>
            <button id="close-demo-modal" class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <iframe id="demo-iframe" title="Demostraci贸n de STTVAR" srcdoc="<p style='text-align:center; padding: 2rem; color: white;'>Cargando demostraci贸n...</p>" frameborder="0"></iframe>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        
        const mainTitle = document.querySelector('.main-title');
        const blinkingCursor = document.querySelector('.title-blinking-cursor');
        if (mainTitle && blinkingCursor) {
            const textToType = mainTitle.textContent;
            mainTitle.textContent = ''; 
            blinkingCursor.style.display = 'none';
            let i = 0;
            function typeWriter() {
                if (i < textToType.length) {
                    mainTitle.textContent += textToType.charAt(i);
                    i++;
                    setTimeout(typeWriter, 200);
                } else {
                    blinkingCursor.style.display = 'block';
                }
            }
            setTimeout(typeWriter, 500);
        }

        const body = document.body;
        const themeToggle = document.getElementById('theme-toggle');
        const navbar = document.getElementById('navbar');
        
        if(window.matchMedia('(pointer: fine)').matches) {
            const cursor = document.querySelector('.cursor');
            const cursorGlow = document.querySelector('.cursor-glow');
            document.addEventListener('mousemove', e => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                cursorGlow.style.left = e.clientX + 'px';
                cursorGlow.style.top = e.clientY + 'px';
            });
        }
        
        document.querySelectorAll('.bento-card').forEach(card => {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
        });

        if (navbar) {
            window.addEventListener('scroll', () => { window.scrollY > 50 ? navbar.classList.add('scrolled') : navbar.classList.remove('scrolled'); });
        }

        const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark-mode' : 'light-mode');
        if (currentTheme === 'light-mode') body.classList.add('light-mode');

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('light-mode');
            localStorage.setItem('theme', body.classList.contains('light-mode') ? 'light-mode' : 'dark-mode');
        });

        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        if (navToggle && navMenu) {
            const navToggleIcon = navToggle.querySelector('i');
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                navToggleIcon.classList.toggle('fa-bars');
                navToggleIcon.classList.toggle('fa-times');
            });
            navMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                navToggleIcon.classList.add('fa-bars');
                navToggleIcon.classList.remove('fa-times');
            }));
        }
        
        const allCopyButtons = document.querySelectorAll('.copy-btn');
        allCopyButtons.forEach(copyBtn => {
            const originalIcon = copyBtn.innerHTML;
            copyBtn.addEventListener('click', () => {
                const codeBlock = copyBtn.previousElementSibling;
                const codeText = codeBlock.innerText;
                navigator.clipboard.writeText(codeText).then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> 隆Copiado!';
                    copyBtn.classList.add('copied');
                    setTimeout(() => {
                        copyBtn.innerHTML = originalIcon;
                        copyBtn.classList.remove('copied');
                    }, 2000);
                });
            });
        });

        const carousel = document.getElementById('image-carousel');
        if (carousel) {
            const slidesContainer = carousel.querySelector('.carousel-slides');
            const carouselSlides = [...carousel.querySelectorAll('.carousel-slide')];
            const prevButton = carousel.querySelector('.carousel-nav.prev');
            const nextButton = carousel.querySelector('.carousel-nav.next');
            const dotsContainer = carousel.querySelector('.carousel-dots');
            let currentIndex = 0; let autoPlayInterval;

            if(carouselSlides.length > 0) {
                carouselSlides.forEach((_, i) => {
                    const dot = document.createElement('button');
                    dot.classList.add('carousel-dot');
                    dot.setAttribute('aria-label', `Ir a la imagen ${i + 1}`);
                    if (i === 0) dot.classList.add('active');
                    dot.addEventListener('click', () => { goToSlide(i); resetAutoPlay(); });
                    dotsContainer.appendChild(dot);
                });
            
                const dots = dotsContainer.querySelectorAll('.carousel-dot');
                const goToSlide = (index) => {
                    currentIndex = (index + carouselSlides.length) % carouselSlides.length;
                    slidesContainer.style.transform = `translateX(-${currentIndex * 100}%)`;
                    dots.forEach((d, i) => d.classList.toggle('active', i === currentIndex));
                };

                const startAutoPlay = () => autoPlayInterval = setInterval(() => goToSlide(currentIndex + 1), 5000);
                const stopAutoPlay = () => clearInterval(autoPlayInterval);
                const resetAutoPlay = () => { stopAutoPlay(); startAutoPlay(); };

                prevButton.addEventListener('click', () => { goToSlide(currentIndex - 1); resetAutoPlay(); });
                nextButton.addEventListener('click', () => { goToSlide(currentIndex + 1); resetAutoPlay(); });
                
                carousel.addEventListener('mouseenter', stopAutoPlay);
                carousel.addEventListener('mouseleave', startAutoPlay);

                goToSlide(0); 
                startAutoPlay();
            }
        }
        
        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
            const carouselSlidesForLightbox = [...document.querySelectorAll('#image-carousel .carousel-slide')];
            if (carouselSlidesForLightbox.length > 0) {
                const lightboxImage = lightbox.querySelector('.lightbox-image');
                const lightboxCaption = lightbox.querySelector('.lightbox-caption');
                const closeButton = lightbox.querySelector('.lightbox-close');
                const prevButton = lightbox.querySelector('.lightbox-prev');
                const nextButton = lightbox.querySelector('.lightbox-next');
                let lightboxCurrentIndex = 0;

                const showLightboxImage = (index) => {
                    const slide = carouselSlidesForLightbox[index];
                    const img = slide.querySelector('img');
                    lightboxImage.src = img.src;
                    lightboxCaption.textContent = slide.dataset.description || '';
                };
                const openLightbox = (index) => {
                    lightboxCurrentIndex = index;
                    showLightboxImage(index);
                    body.classList.add('lightbox-active');
                    lightbox.classList.add('active');
                    document.addEventListener('keydown', handleKeyPress);
                };
                const closeLightbox = () => {
                    body.classList.remove('lightbox-active');
                    lightbox.classList.remove('active');
                    document.removeEventListener('keydown', handleKeyPress);
                };
                const showPrevImage = () => {
                    lightboxCurrentIndex = (lightboxCurrentIndex - 1 + carouselSlidesForLightbox.length) % carouselSlidesForLightbox.length;
                    showLightboxImage(lightboxCurrentIndex);
                };
                const showNextImage = () => {
                    lightboxCurrentIndex = (lightboxCurrentIndex + 1) % carouselSlidesForLightbox.length;
                    showLightboxImage(lightboxCurrentIndex);
                };
                const handleKeyPress = (e) => {
                    if (e.key === 'Escape') closeLightbox();
                    if (e.key === 'ArrowLeft') showPrevImage();
                    if (e.key === 'ArrowRight') showNextImage();
                };

                carouselSlidesForLightbox.forEach((slide, index) => slide.addEventListener('click', () => openLightbox(index)));
                closeButton.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
                prevButton.addEventListener('click', showPrevImage);
                nextButton.addEventListener('click', showNextImage);
            }
        }

        const fadeInObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in').forEach(el => fadeInObserver.observe(el));

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    const navLink = document.querySelector(`.nav-links a[href="#${id}"]`);
                    document.querySelectorAll('.nav-links a.active').forEach(a => a.classList.remove('active'));
                    if (navLink) navLink.classList.add('active');
                }
            });
        }, { rootMargin: "-40% 0px -60% 0px" });
        document.querySelectorAll('main section[id]').forEach(sec => sectionObserver.observe(sec));
        
        function initParticles() {
            const particlesContainer = document.getElementById('particles-js');
            if (particlesContainer && typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {"particles":{"number":{"value":60,"density":{"enable":true,"value_area":800}},"color":{"value":"#4a5568"},"shape":{"type":"circle"},"opacity":{"value":0.3,"random":true,"anim":{"enable":true,"speed":1,"opacity_min":0.1,"sync":false}},"size":{"value":3,"random":true},"line_linked":{"enable":true,"distance":150,"color":"#4a5568","opacity":0.2,"width":1},"move":{"enable":true,"speed":1,"direction":"none","out_mode":"out"}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"grab"},"resize":true},"modes":{"grab":{"distance":140,"line_linked":{"opacity":0.5}}}},"retina_detect":true});
            }
        }
        if (!body.classList.contains('light-mode')) { initParticles(); }
        
        // --- LGICA DEL MODAL DE DEMOSTRACIN ---
        const openDemoModalBtn = document.getElementById('open-demo-modal');
        const demoModalOverlay = document.getElementById('demo-modal-overlay');
        const closeDemoModalBtn = document.getElementById('close-demo-modal');
        const demoIframe = document.getElementById('demo-iframe');

        // Contenido completo de la demo, con los backticks escapados para que funcione dentro de un template literal
        const demoHtmlContent = `
            <!DOCTYPE html>
            <html lang="es">
            <head>
                <meta charset="utf-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>STTVAR - Interfaz Profesional (DEMO)</title>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"><\/script>
                <link rel="preconnect" href="https://fonts.googleapis.com" />
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
                <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700&display=swap" rel="stylesheet" />
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
                <style>
                    :root{--bg-color:#f8f9fa;--text-color:#212529;--container-bg:#ffffff;--border-color:#dee2e6;--input-bg:#f1f3f5;--shadow-color-light:rgba(0,0,0,0.05);--shadow-color-heavy:rgba(0,0,0,0.1);--accent-color:#007bff;--accent-gradient:linear-gradient(135deg,#007bff,#17a2b8);--accent-gradient-hover:linear-gradient(135deg,#17a2b8,#007bff);--subtitle-color:#0056b3;--border-radius:12px;--transition-speed:0.2s}.dark-theme{--bg-color:#121212;--text-color:#e9ecef;--container-bg:#1e1e1e;--border-color:#495057;--input-bg:#2c2c2c;--shadow-color-light:rgba(0,0,0,0.2);--shadow-color-heavy:rgba(0,0,0,0.4);--subtitle-color:#80bfff}*{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}body{font-family:"Inter",sans-serif;background-color:var(--bg-color);color:var(--text-color);min-height:100vh;display:flex;justify-content:center;align-items:flex-start;padding:2rem 1rem;transition:background-color var(--transition-speed),color var(--transition-speed)}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background-color:var(--border-color);border-radius:10px;border:2px solid transparent;background-clip:content-box}::-webkit-scrollbar-thumb:hover{background-color:var(--subtitle-color)}.container{max-width:900px;width:100%;background-color:var(--container-bg);border-radius:var(--border-radius);padding:2.5rem;box-shadow:0 8px 32px var(--shadow-color-light);border:1px solid var(--border-color);transition:all var(--transition-speed)}.notes-active .container{max-width:1400px}.main-content{display:grid;grid-template-columns:1fr;gap:2rem;transition:grid-template-columns var(--transition-speed)}.notes-active .main-content{grid-template-columns:minmax(0,1fr) minmax(0,1fr)}.main-column{min-width:0;display:flex;flex-direction:column}#notes-wrapper{display:none}.notes-active #notes-wrapper{display:flex;flex-direction:column;animation:slideIn 0.5s ease-out}@keyframes slideIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}.main-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;gap:1rem;flex-wrap:wrap}h1{font-family:"Poppins",sans-serif;font-size:clamp(1.5rem,4vw,2rem);display:flex;align-items:center;gap:.8rem;letter-spacing:-1px;margin:0}h1 .logo-icon{color:var(--accent-color);transition:color var(--transition-speed);width:1.2em;height:1.2em}@keyframes pulse{0%,100%{transform:scaleY(.2)}50%{transform:scaleY(1)}}.soundwave-bar{fill:currentColor;transform-origin:bottom;animation:pulse 1.5s infinite ease-in-out}.soundwave-bar:nth-child(2){animation-delay:-.2s}.soundwave-bar:nth-child(3){animation-delay:-.4s}.soundwave-bar:nth-child(4){animation-delay:-.6s}.header-controls{display:flex;align-items:center;gap:.5rem}#user-counter{display:flex;align-items:center;gap:.5rem;font-size:.9rem;font-weight:500;color:var(--text-color);opacity:.7;padding:.4rem .8rem;background-color:var(--input-bg);border-radius:20px;transition:all var(--transition-speed)}#user-count-number{font-weight:700;min-width:12px;text-align:center}.count-update{animation:pop-in .4s ease}@keyframes pop-in{0%{transform:scale(1)}50%{transform:scale(1.3)}100%{transform:scale(1)}}.header-buttons{display:flex;gap:.5rem}.icon-button{position:relative;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;border:1px solid transparent;background:transparent;color:var(--text-color);cursor:pointer;opacity:.7;transition:all var(--transition-speed)}.icon-button:hover{opacity:1;background:var(--input-bg);transform:scale(1.1);color:var(--accent-color)}.unread-badge{position:absolute;top:0;right:0;background-color:var(--accent-color);color:#fff;border-radius:50%;width:18px;height:18px;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center;border:2px solid var(--container-bg);transform:scale(0);transition:transform .3s cubic-bezier(.18,.89,.32,1.28)}.unread-badge:not(.hidden){transform:scale(1)}.text-area-wrapper{position:relative;display:flex;flex-direction:column;flex-grow:1}#subtitulo,#acumulado,#ai_response,#notes-area{padding:1.25rem;border-radius:var(--border-radius);border:1px solid var(--border-color);background-color:var(--bg-color);color:var(--text-color);transition:all var(--transition-speed)}#subtitulo{font-size:clamp(1.2rem,3vw,1.6rem);font-weight:600;color:var(--subtitle-color);min-height:80px;display:flex;align-items:center;justify-content:center;text-align:center;margin-bottom:1.5rem;line-height:1.4;background-color:var(--input-bg);text-shadow:0 1px 2px var(--shadow-color-light)}#acumulado,#ai_response,#notes-area{min-height:150px;overflow-y:auto;white-space:pre-wrap;line-height:1.7;font-size:1rem;flex-grow:1}#ai_response{margin-top:1.5rem}.counter{font-size:.8rem;color:var(--text-color);opacity:.6;text-align:right;padding:.25rem .5rem 1.5rem;height:1em}#notes-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}#notes-title{font-size:1.25rem;font-weight:600;color:var(--subtitle-color)}.hidden{display:none!important}.copy-button{position:absolute;top:.8rem;right:.8rem;width:32px;height:32px;background-color:var(--container-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:.3;transition:all var(--transition-speed);z-index:10;font-size:.8rem}.text-area-wrapper:hover .copy-button{opacity:.7}.copy-button:hover{opacity:1;transform:scale(1.1);background-color:var(--input-bg)}.copy-button .fa-check{color:#28a745}.quick-actions-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem;padding:1.5rem 0}.quick-action-btn{padding:.6rem .5rem;font-size:.8rem;font-weight:600;border:1px solid var(--border-color);background:var(--input-bg);color:var(--text-color);border-radius:8px;cursor:pointer;transition:all var(--transition-speed);display:flex;align-items:center;justify-content:center;gap:.5rem}.quick-action-btn:hover:not(:disabled){background:var(--accent-color);color:#fff;border-color:transparent;transform:translateY(-2px);box-shadow:0 4px 15px var(--shadow-color-heavy)}.quick-action-btn:disabled{opacity:.5;cursor:not-allowed}.question-section{display:flex;gap:.75rem;align-items:center;margin-top:1.5rem}.ai-question-wrapper{position:relative;flex-grow:1}#ai_question{width:100%;padding:.8rem 3rem .8rem 1rem;font-size:1rem;border-radius:8px;background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color);transition:all var(--transition-speed)}#ai_question:focus{border-color:var(--accent-color);background-color:var(--container-bg)}#questionHistoryBtn{position:absolute;right:4px;top:50%;transform:translateY(-50%);width:32px;height:32px;font-size:.9rem}#sendQuestion{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.8rem 1.25rem;font-size:.9rem;font-weight:600;color:#fff;background:var(--accent-gradient);border:none;border-radius:8px;cursor:pointer;transition:all var(--transition-speed);box-shadow:0 4px 15px var(--shadow-color-light)}#sendQuestion:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow-color-heavy);background:var(--accent-gradient-hover)}#status{font-size:.8rem;text-align:center;margin-top:1.5rem;padding:.4rem 1rem;border-radius:8px;background-color:var(--input-bg);border:1px solid transparent;transition:all var(--transition-speed);opacity:0}.status.visible{opacity:1}.status.success{border-color:#28a745;color:#28a745}.status.error{border-color:#dc3545;color:#dc3545}#zen-mode-container{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#121212;color:#e9ecef;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity var(--transition-speed)}body.zen-active #zen-mode-container{opacity:1;visibility:visible}#zen-subtitulo{font-size:6vmin;font-weight:600;padding:2rem;text-align:center;line-height:1.4;max-width:90vw;color:#80bfff}#zen-acumulado{font-size:2.2vmin;line-height:1.6;text-align:left;white-space:pre-wrap;padding:2rem 3rem;max-width:90vw;max-height:85vh;overflow-y:auto;background-color:#1e1e1e;border-radius:var(--border-radius);border:1px solid #495057;display:none}body.zen-active.zen-view-acumulado #zen-subtitulo{display:none}body.zen-active.zen-view-acumulado #zen-acumulado{display:block}#zen-controls{position:absolute;top:1.5rem;right:1.5rem;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:.5rem;background-color:#1e1e1e;padding:.5rem;border-radius:50px;border:1px solid #495057;box-shadow:0 4px 15px rgba(0,0,0,.2)}.zen-control-btn{background:transparent;color:#e9ecef;opacity:.7}.zen-control-btn:hover{opacity:1;background:#2c2c2c;transform:scale(1.1);color:#007bff}.popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:999;opacity:0;visibility:hidden;backdrop-filter:blur(4px);transition:opacity .3s,visibility .3s}.popup-overlay.active{opacity:1;visibility:visible}.popup-menu{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.95);background:var(--container-bg);border-radius:var(--border-radius);box-shadow:0 15px 40px var(--shadow-color-heavy);z-index:1000;width:90%;max-width:450px;max-height:85vh;display:flex;flex-direction:column;opacity:0;visibility:hidden;transition:transform .3s,opacity .3s,visibility .3s}.popup-overlay.active .popup-menu{transform:translate(-50%,-50%) scale(1);opacity:1;visibility:visible}.popup-header{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--border-color)}.popup-header h2{font-size:1.1rem;font-weight:600}.popup-content{display:flex;flex-direction:column;gap:1rem;padding:1.5rem;overflow-y:auto}.action-button{padding:.7rem 1.2rem;font-size:.9rem;border-radius:8px;border:none;background:var(--accent-gradient);color:#fff;cursor:pointer;font-weight:600;transition:all var(--transition-speed)}.action-button:hover{transform:translateY(-2px);box-shadow:0 4px 15px var(--shadow-color-light)}.action-button.secondary{background:var(--input-bg);color:var(--text-color);border:1px solid var(--border-color)}.action-button.secondary:hover{border-color:var(--accent-color);color:var(--accent-color)}#chatModalOverlay .popup-menu{max-width:400px;height:70vh;right:1rem;left:auto;top:auto;bottom:1rem;transform:translateY(calc(100% + 2rem))}#chatModalOverlay.active .popup-menu{transform:translateY(0)}@media (max-width:1024px){.notes-active .main-content{grid-template-columns:1fr}.container{padding:2rem 1.5rem}}@media (max-width:600px){body{padding:1rem .5rem}.container{padding:1.5rem 1rem}.main-header{justify-content:space-between}h1{font-size:1.3rem}.header-controls{order:3;width:100%;justify-content:center;margin-top:.5rem}.question-section{flex-direction:column;align-items:stretch}#chatModalOverlay .popup-menu{left:1rem;right:1rem;bottom:1rem;width:auto;max-width:none;height:75vh}}#questionHistoryPopup{position:absolute;bottom:105%;left:0;right:0;background-color:var(--container-bg);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 8px 25px var(--shadow-color-heavy);z-index:100;max-height:250px;overflow-y:auto}.history-item{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;cursor:pointer;transition:background-color var(--transition-speed);border-bottom:1px solid var(--border-color)}.history-item:last-child{border-bottom:none}.history-item:hover{background-color:var(--input-bg)}.history-item span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;margin-right:1rem;font-size:.95rem}.history-delete-btn{background:none;border:none;color:#c53030;cursor:pointer;font-size:.9rem;flex-shrink:0;padding:.2rem}#previewModalOverlay .popup-menu,#sharedNotesModalOverlay .popup-menu{max-width:800px}#previewContent,#sharedNotesContent{background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;padding:1rem;max-height:50vh;overflow-y:auto;white-space:pre-wrap;word-wrap:break-word;font-size:1rem;line-height:1.6}.setting-item{display:grid;grid-template-columns:1fr auto;align-items:center;gap:1rem}.setting-title{font-size:.8rem;font-weight:600;text-transform:uppercase;color:var(--text-color);opacity:.5;margin:1rem 0 .5rem;padding-bottom:.5rem;border-bottom:1px solid var(--border-color)}.select-wrapper{position:relative}.select-wrapper::after{content:"\\f078";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;top:50%;right:1rem;transform:translateY(-50%);pointer-events:none;opacity:.5}.popup-content select,.popup-content input[type=text]{width:100%;padding:.8rem 1rem;font-size:.9rem;border-radius:8px;border:1px solid var(--border-color);background:var(--input-bg);color:var(--text-color);-webkit-appearance:none;appearance:none}.popup-footer{padding:1rem 1.5rem;border-top:1px solid var(--border-color);display:flex;gap:1rem;justify-content:flex-end}.switch{position:relative;display:inline-block;width:44px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--border-color);transition:.4s;border-radius:24px}.slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2)}input:checked+.slider{background-color:var(--accent-color)}input:checked+.slider:before{transform:translateX(20px)}.chat-message{padding:.6rem 1rem;border-radius:18px;max-width:85%;line-height:1.5;word-wrap:break-word}.chat-message strong{display:block;font-size:.75rem;margin-bottom:.2rem;color:var(--accent-color);opacity:.8}#chat-messages{display:flex;flex-direction:column;gap:.75rem;flex-grow:1}.chat-message.other{background-color:var(--input-bg);align-self:flex-start;border-bottom-left-radius:4px}.chat-message.own{background:var(--accent-color);color:#fff;align-self:flex-end;border-bottom-right-radius:4px}.chat-message.own strong{color:rgba(255,255,255,.8)}#chat-message-area{display:flex;align-items:center;gap:.75rem}
                    #demo-notice-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);backdrop-filter:blur(5px);z-index:5000;display:flex;align-items:center;justify-content:center;padding:1rem;opacity:1;visibility:visible;transition:opacity .4s ease,visibility .4s ease}#demo-notice-overlay.hidden{opacity:0;visibility:hidden}#demo-notice-box{background-color:var(--container-bg);color:var(--text-color);padding:2rem 2.5rem;border-radius:var(--border-radius);max-width:550px;width:100%;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,.2);border:1px solid var(--border-color);transform:scale(.95);opacity:0;animation:fadeInScaleUp .5s .2s forwards cubic-bezier(.18,.89,.32,1.28)}@keyframes fadeInScaleUp{to{transform:scale(1);opacity:1}}#demo-notice-box h2{font-family:"Poppins",sans-serif;font-size:1.5rem;color:var(--subtitle-color);margin-bottom:1.5rem;display:flex;align-items:center;justify-content:center;gap:.75rem}#demo-notice-box p{font-size:1rem;line-height:1.7;margin-bottom:1rem}#demo-notice-box p:last-of-type{margin-bottom:2rem}#demo-notice-box strong{color:var(--subtitle-color);font-weight:600}#close-demo-notice{padding:.8rem 1.5rem;font-size:1rem;font-weight:600;color:#fff;background:var(--accent-gradient);border:none;border-radius:8px;cursor:pointer;transition:all var(--transition-speed);box-shadow:0 4px 15px var(--shadow-color-light)}#close-demo-notice:hover{transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow-color-heavy);background:var(--accent-gradient-hover)}
                <\/style>
            </head>
            <body>
                <div id="demo-notice-overlay">
                    <div id="demo-notice-box">
                      <h2><i class="fas fa-info-circle"></i> AVISO DE DEMOSTRACIN</h2>
                      <p>
                        Este proyecto es una <strong>simulaci贸n</strong> de la interfaz principal. El contenido es generado autom谩ticamente para fines de demostraci贸n.
                      </p>
                      <p>
                        En la versi贸n completa, la transcripci贸n se obtiene en tiempo real desde nuestra <strong>aplicaci贸n de escritorio</strong>, que se vincula directamente con esta interfaz web.
                      </p>
                      <button id="close-demo-notice">Entendido</button>
                    </div>
                </div>

                <div class="container">
                  <header class="main-header"><h1><svg class="logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect class="soundwave-bar" x="2" y="6" width="4" height="12" rx="2"></rect><rect class="soundwave-bar" x="8" y="2" width="4" height="20" rx="2"></rect><rect class="soundwave-bar" x="14" y="4" width="4" height="16" rx="2"></rect><rect class="soundwave-bar" x="20" y="8" width="4" height="8" rx="2"></rect></svg> STTVAR</h1><div class="header-controls"><div id="user-counter" title="Usuarios Conectados"><i class="fas fa-users"></i> <span id="user-count-number">1</span></div><div class="header-buttons"><button id="chatToggleBtn" class="icon-button" title="Chat Global"><i class="fas fa-comments"></i> <span id="unread-badge" class="unread-badge hidden">0</span></button> <button id="notesToggleBtn" class="icon-button" title="Mostrar/Ocular Apuntes"><i class="fas fa-clipboard"></i></button> <button id="zenModeBtn" class="icon-button" title="Modo Pantalla Completa"><i class="fas fa-expand"></i></button> <button id="themeToggle" class="icon-button" title="Cambiar tema"><i class="fas fa-moon"></i></button> <button id="settingsBtn" class="icon-button" title="Opciones"><i class="fas fa-cog"></i></button></div></div></header>
                  <div class="main-content">
                    <div class="main-column">
                      <div id="subtitulo">Esperando transmisi贸n...</div>
                      <div class="text-area-wrapper"><div id="acumulado"></div><button class="copy-button" onclick="copyText('acumulado', this)" title="Copiar transcripci贸n"><i class="fas fa-copy"></i><i class="fas fa-check hidden"></i></button></div>
                      <div id="acumulado-counter" class="counter"></div>
                      <div class="quick-actions-section"><button class="quick-action-btn" onclick="quickAction('summarize')"><i class="fas fa-align-left"></i> Resumir</button> <button class="quick-action-btn" onclick="quickAction('keywords')"><i class="fas fa-key"></i> Puntos Clave</button> <button class="quick-action-btn" onclick="quickAction('correct')"><i class="fas fa-check-double"></i> Corregir</button> <button id="downloadAudioBtn" class="quick-action-btn" disabled><i class="fas fa-volume-up"></i> Descargar Audio</button></div>
                      <div class="question-section">
                        <div class="ai-question-wrapper"><input type="text" id="ai_question" placeholder="Haz una pregunta sobre el texto..."/> <button id="questionHistoryBtn" class="icon-button" title="Historial de preguntas"><i class="fas fa-history"></i></button><div id="questionHistoryPopup" class="hidden"></div></div>
                        <button id="sendQuestion"><span class="button-content"><i class="fas fa-paper-plane"></i></span> <span class="button-loader hidden"><i class="fas fa-spinner fa-spin"></i></span></button>
                      </div>
                      <div id="ai_response" class="hidden"></div>
                      <div class="status" id="status">Conectado</div>
                    </div>
                    <div id="notes-wrapper">
                      <div id="notes-header">
                        <h2 id="notes-title"><i class="fas fa-pencil-alt"></i> Mis Apuntes</h2>
                        <div class="header-buttons"><button id="shareNotesBtn" class="icon-button" title="Compartir Apuntes en el Chat"><i class="fas fa-share-alt"></i></button> <button id="exportNotesBtn" class="icon-button" title="Exportar Apuntes"><i class="fas fa-save"></i></button></div>
                      </div>
                      <div class="text-area-wrapper"><textarea id="notes-area" placeholder="Escribe tus notas aqu铆..."></textarea> <button class="copy-button" onclick="copyText('notes-area', this)" title="Copiar apuntes"><i class="fas fa-copy"></i><i class="fas fa-check hidden"></i></button></div>
                      <div id="notes-counter" class="counter"></div>
                    </div>
                  </div>
                </div>
                <div id="zen-mode-container"><div id="zen-controls"><button id="zen-font-decrease-btn" class="icon-button zen-control-btn" title="Disminuir Tama帽o"><i class="fas fa-font" style="font-size: .8em;"></i>-</button> <button id="zen-font-increase-btn" class="icon-button zen-control-btn" title="Aumentar Tama帽o"><i class="fas fa-font" style="font-size: .8em;"></i>+</button> <button id="zen-view-toggle-btn" class="icon-button zen-control-btn" title="Ver Texto Acumulado"><i class="fas fa-file-alt"></i></button> <button id="zen-close-btn" class="icon-button zen-control-btn" title="Cerrar"><i class="fas fa-compress"></i></button></div><div id="zen-subtitulo"></div><div id="zen-acumulado"></div></div>
                <div class="popup-overlay" id="chatModalOverlay"><div class="popup-menu"><div class="popup-header"><h2><i class="fas fa-comments"></i> Chat Global<span id="chat-current-user"></span></h2><button id="closeChatBtn" class="icon-button"><i class="fas fa-times"></i></button></div><div class="popup-content" id="chat-messages" style="flex-grow: 1;"></div><div class="popup-content" style="padding-top: 1rem; border-top: 1px solid var(--border-color);"><div id="chat-name-prompt"><input type="text" id="chat-username-input" placeholder="Elige un nombre para el chat..." style="margin: 0;"/> <button id="chat-save-name-btn" class="action-button">Guardar y Entrar</button></div><div id="chat-message-area" class="hidden"><input type="text" id="chat-message-input" placeholder="Escribe un mensaje..." style="margin: 0; flex-grow:1;"/> <button id="chat-send-btn" class="action-button" title="Enviar Mensaje"><i class="fas fa-paper-plane"></i></button></div></div></div></div>
                <div class="popup-overlay" id="settingsModalOverlay"><div class="popup-menu"><div class="popup-header"><h2><i class="fas fa-cog"></i> Opciones</h2><button id="closePopupBtn" class="icon-button"><i class="fas fa-times"></i></button></div><div class="popup-content"><div class="setting-title">General</div><div class="setting-item"><label for="autoScrollToggle">Scroll Autom谩tico</label><label class="switch"><input type="checkbox" id="autoScrollToggle" checked /><span class="slider"></span></label></div><div class="setting-title">Idiomas</div><label for="idioma">Idioma de Subt铆tulos</label><div class="select-wrapper"><select id="idioma"><option value="es">Espa帽ol</option><option value="en">Ingl茅s</option><option value="fr">Franc茅s</option><option value="de">Alem谩n</option></select></div><label for="idiomaAcumulado" style="margin-top: 1rem;">Idioma de Transcripci贸n</label><div class="select-wrapper"><select id="idiomaAcumulado"><option value="es">Espa帽ol</option><option value="en">Ingl茅s</option><option value="fr">Franc茅s</option><option value="de">Alem谩n</option></select></div><div class="setting-title">Acciones</div><button id="clearTextBtn" class="action-button secondary"><i class="fas fa-eraser"></i> Limpiar Transcripci贸n</button></div></div></div>
                <div class="popup-overlay" id="sharedNotesModalOverlay"><div class="popup-menu"><div class="popup-header"><h2>Apuntes Compartidos por <span id="sharedNotesUser"></span></h2><button id="closeSharedNotesBtn" class="icon-button"><i class="fas fa-times"></i></button></div><div class="popup-content"><pre id="sharedNotesContent"></pre></div><div class="popup-footer"><button id="downloadSharedNotesTxtBtn" class="action-button secondary"><i class="fas fa-file-alt"></i> Descargar .txt</button> <button id="downloadSharedNotesDocxBtn" class="action-button"><i class="fas fa-file-word"></i> Descargar .docx</button></div></div></div>
                <script>
                    const{jsPDF}=window.jspdf,clientId=Math.random().toString(36).substr(2,9),clientState={isAutoScrollActive:!0,zenFontSize:6,questionHistory:[]};let unreadMessageCount=0;const elements={subtitulo:document.getElementById("subtitulo"),acumulado:document.getElementById("acumulado"),aiResponse:document.getElementById("ai_response"),status:document.getElementById("status"),aiQuestion:document.getElementById("ai_question"),sendQuestionBtn:document.getElementById("sendQuestion"),themeToggle:document.getElementById("themeToggle"),settingsModalOverlay:document.getElementById("settingsModalOverlay"),closePopupBtn:document.getElementById("closePopupBtn"),autoScrollToggle:document.getElementById("autoScrollToggle"),idiomaSelect:document.getElementById("idioma"),idiomaAcumuladoSelect:document.getElementById("idiomaAcumulado"),settingsBtn:document.getElementById("settingsBtn"),clearTextBtn:document.getElementById("clearTextBtn"),questionHistoryBtn:document.getElementById("questionHistoryBtn"),questionHistoryPopup:document.getElementById("questionHistoryPopup"),notesToggleBtn:document.getElementById("notesToggleBtn"),notesArea:document.getElementById("notes-area"),exportNotesBtn:document.getElementById("exportNotesBtn"),acumuladoCounter:document.getElementById("acumulado-counter"),notesCounter:document.getElementById("notes-counter"),downloadAudioBtn:document.getElementById("downloadAudioBtn"),userCounter:document.getElementById("user-counter"),userCountNumber:document.getElementById("user-count-number"),unreadBadge:document.getElementById("unread-badge"),zenModeContainer:document.getElementById("zen-mode-container"),zenSubtitulo:document.getElementById("zen-subtitulo"),zenAcumulado:document.getElementById("zen-acumulado"),zenModeBtn:document.getElementById("zenModeBtn"),zenCloseBtn:document.getElementById("zen-close-btn"),zenViewToggleBtn:document.getElementById("zen-view-toggle-btn"),zenFontIncreaseBtn:document.getElementById("zen-font-increase-btn"),zenFontDecreaseBtn:document.getElementById("zen-font-decrease-btn"),chatToggleBtn:document.getElementById("chatToggleBtn"),chatModalOverlay:document.getElementById("chatModalOverlay"),closeChatBtn:document.getElementById("closeChatBtn"),chatMessages:document.getElementById("chat-messages"),chatCurrentUser:document.getElementById("chat-current-user"),chatNamePrompt:document.getElementById("chat-name-prompt"),chatUsernameInput:document.getElementById("chat-username-input"),chatSaveNameBtn:document.getElementById("chat-save-name-btn"),chatMessageArea:document.getElementById("chat-message-area"),chatMessageInput:document.getElementById("chat-message-input"),chatSendBtn:document.getElementById("chat-send-btn"),shareNotesBtn:document.getElementById("shareNotesBtn"),sharedNotesModalOverlay:document.getElementById("sharedNotesModalOverlay"),closeSharedNotesBtn:document.getElementById("closeSharedNotesBtn"),sharedNotesUser:document.getElementById("sharedNotesUser"),sharedNotesContent:document.getElementById("sharedNotesContent"),downloadSharedNotesTxtBtn:document.getElementById("downloadSharedNotesTxtBtn"),downloadSharedNotesDocxBtn:document.getElementById("downloadSharedNotesDocxBtn"),demoNoticeOverlay:document.getElementById("demo-notice-overlay"),closeDemoNoticeBtn:document.getElementById("close-demo-notice")};let statusTimeout;const fakeTranscript=["Buenos d铆as a todos y bienvenidos a esta demostraci贸n.","Hoy vamos a explorar las capacidades de la inteligencia artificial en tiempo real.","Como pueden ver, el sistema est谩 transcribiendo mis palabras casi instant谩neamente.","Esto es posible gracias a los avances en el procesamiento del lenguaje natural.","Podemos analizar grandes vol煤menes de texto para extraer informaci贸n clave.","Por ejemplo, la plataforma puede identificar temas, resumir contenido y responder preguntas.","Esto tiene aplicaciones en muchos campos: educaci贸n, negocios, accesibilidad...","Imaginen las posibilidades para reuniones, conferencias o clases en l铆nea.","La precisi贸n ha mejorado dr谩sticamente en los 煤ltimos a帽os.","Ahora, vamos a probar algunas de las funciones interactivas.","Pueden usar el panel de la derecha para hacer preguntas sobre el texto.","La IA analizar谩 el contexto completo de la transcripci贸n para responder.","Gracias por su atenci贸n, espero que encuentren 煤til esta herramienta."];let transcriptIndex=0,fakeAcumuladoText="",fakeUserCount=Math.floor(5*Math.random())+8,simulationIntervals=[];function runSimulation(){simulationIntervals.push(setInterval(()=>{if(transcriptIndex>=fakeTranscript.length)return void(elements.subtitulo.textContent="La transmisi贸n de demostraci贸n ha finalizado.");const e=fakeTranscript[transcriptIndex];fakeAcumuladoText+=(fakeAcumuladoText?" ":"")+e,elements.subtitulo.textContent=e,elements.acumulado.textContent=fakeAcumuladoText,elements.zenSubtitulo.textContent=e,elements.zenAcumulado.textContent=fakeAcumuladoText,updateCounters("acumulado"),clientState.isAutoScrollActive&&(elements.acumulado.scrollTop=elements.acumulado.scrollHeight,elements.zenAcumulado.scrollTop=elements.zenAcumulado.scrollHeight),transcriptIndex++},4e3)),simulationIntervals.push(setInterval(()=>{const e=.5<Math.random()?1:-1,t=Math.max(5,fakeUserCount+e);fakeUserCount=t,elements.userCountNumber.textContent!=fakeUserCount&&(elements.userCountNumber.textContent=fakeUserCount,elements.userCountNumber.classList.add("count-update"),setTimeout(()=>elements.userCountNumber.classList.remove("count-update"),400))},8e3));const e=["Ana","Carlos","Laura","David"],t=["Muy interesante esta funci贸n.","Estoy de acuerdo.","驴Se puede exportar el texto?","S铆, creo que hay un bot贸n para eso.","驴Qu茅 pasa si le pido un poema?","隆Int茅ntalo!","La transcripci贸n es bastante precisa.","Me sorprende la velocidad."];let n=0;simulationIntervals.push(setInterval(()=>{const o={user:e[Math.floor(Math.random()*e.length)],message:t[n%t.length]};n++,renderChatMessage(o),elements.chatModalOverlay.classList.contains("active")||(unreadMessageCount++,elements.unreadBadge.textContent=9<unreadMessageCount?"9+":unreadMessageCount,elements.unreadBadge.classList.remove("hidden"))},12e3));let o=!1;simulationIntervals.push(setInterval(()=>{o=!o,elements.downloadAudioBtn.disabled=!o,o?(elements.downloadAudioBtn.title="Descargar audio_demo.mp3",elements.downloadAudioBtn.onclick=()=>{alert("Esta es una demostraci贸n. La descarga de audio no est谩 activa.")}):elements.downloadAudioBtn.title=""},15e3))}function stopSimulation(){simulationIntervals.forEach(e=>clearInterval(e)),simulationIntervals=[]}function sendQuestion(e){const t=e||elements.aiQuestion.value.trim();if(!t)return void updateStatus("Por favor, escribe una pregunta.","error");const n=elements.sendQuestionBtn.querySelector(".button-content"),o=elements.sendQuestionBtn.querySelector(".button-loader");elements.sendQuestionBtn.disabled=!0,n.classList.add("hidden"),o.classList.remove("hidden"),elements.aiResponse.classList.remove("hidden"),elements.aiResponse.textContent="Procesando...",e||addQuestionToHistory(t),setTimeout(()=>{let e="Como modelo de lenguaje, mi an谩lisis del texto proporcionado indica que la pregunta es relevante para el contexto actual. La respuesta se puede encontrar en los segmentos que discuten la tecnolog铆a y sus aplicaciones.";const a=t.toLowerCase();a.includes("resumir")||a.includes("resumen")?e="Resumen del texto: La presentaci贸n introduce una herramienta de transcripci贸n en tiempo real impulsada por IA. Destaca su velocidad, precisi贸n y funciones adicionales como resumir, extraer puntos clave y responder preguntas. Se mencionan sus aplicaciones en educaci贸n y negocios para mejorar la accesibilidad y la eficiencia en reuniones y conferencias.":a.includes("puntos clave")||a.includes("keywords")?e="Aqu铆 est谩n los puntos clave del texto:\\n\\n1.  **Transcripci贸n en Tiempo Real:** La herramienta convierte la voz en texto casi instant谩neamente.\\n2.  **Procesamiento de Lenguaje Natural:** Utiliza IA avanzada para analizar el contenido.\\n3.  **Funciones Interactivas:** Permite resumir, corregir y hacer preguntas sobre el texto.\\n4.  **Aplicaciones Amplias:** Es 煤til para educaci贸n, negocios y para mejorar la accesibilidad.\\n5.  **Alta Precisi贸n:** La calidad de la transcripci贸n ha mejorado significativamente.":a.includes("corregir")?e="El texto ha sido revisado en busca de errores gramaticales y parece estar bien estructurado. Una sugerencia podr铆a ser variar el vocabulario en frases como 'Esto es posible gracias a...' para mayor dinamismo.":a.includes("nombre")&&(e="La herramienta se llama STTVAR, como se indica en el encabezado de la p谩gina."),elements.aiResponse.textContent=e,elements.sendQuestionBtn.disabled=!1,n.classList.remove("hidden"),o.classList.add("hidden")},2500),e||(elements.aiQuestion.value="")}function sendChatMessage(e){e.isNote?(updateStatus("Apuntes compartidos.","success"),renderChatMessage(e)):e.message?(elements.chatMessageInput.value="",renderChatMessage(e)):updateStatus("Error al enviar.","error"),elements.chatMessageInput.focus()}function makeRequest(e,t,n){console.log("Llamada simulada a: "+e),updateStatus("Opci贸n cambiada (simulado).","success")}function renderChatMessage(e){const t=document.createElement("div"),n=localStorage.getItem("stttvar_username"),o=n&&e.user===n;t.classList.add("chat-message",o?"own":"other"),e.isNote?(t.innerHTML='<strong>Apuntes de '+(o?"ti":e.user)+'</strong><p style="font-style: italic; opacity: 0.8; margin-bottom: 0.5rem;">"Se ha compartido un conjunto de apuntes."</p><button class="action-button view-shared-notes-btn" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">Ver</button>',t.querySelector(".view-shared-notes-btn").dataset.notesContent=e.content,t.querySelector(".view-shared-notes-btn").dataset.notesUser=e.user):(t.innerHTML="<strong></strong><p></p>",t.querySelector("strong").textContent=o?"T煤":e.user,t.querySelector("p").textContent=e.message);const a=elements.chatMessages.scrollHeight-elements.chatMessages.clientHeight<=elements.chatMessages.scrollTop+20;elements.chatMessages.appendChild(t),a&&(elements.chatMessages.scrollTop=elements.chatMessages.scrollHeight)}function initializeChat(){const e=localStorage.getItem("stttvar_username");e?(elements.chatCurrentUser.textContent="("+e+")",elements.chatNamePrompt.classList.add("hidden"),elements.chatMessageArea.classList.remove("hidden"),elements.chatMessageInput.focus()):(elements.chatCurrentUser.textContent="",elements.chatNamePrompt.classList.remove("hidden"),elements.chatMessageArea.classList.add("hidden"),elements.chatUsernameInput.focus())}function openSharedNotesModal(e,t){elements.sharedNotesUser.textContent=t,elements.sharedNotesContent.textContent=e,elements.sharedNotesModalOverlay.classList.add("active"),elements.downloadSharedNotesTxtBtn.onclick=()=>downloadFile(e,"txt","apuntes_de_"+t),elements.downloadSharedNotesDocxBtn.onclick=()=>downloadFile(e,"docx","apuntes_de_"+t)}function downloadFile(e,t,n){if(!e||!e.trim())return void updateStatus("No hay contenido para descargar.","error");if("txt"===t){const o=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download=n+".txt",s.click(),URL.revokeObjectURL(a)}else"docx"===t&&alert("Funci贸n no implementada en esta demo. Normalmente generar铆a un archivo .docx")}function quickAction(e){const t=elements.acumulado.textContent;if(!t.trim())return void updateStatus("No hay texto para procesar.","error");sendQuestion({summarize:"Resume el texto:\\n\\n",keywords:"Extrae 5 puntos clave:\\n\\n",correct:"Corrige la gram谩tica:\\n\\n"}[e]+t)}function addQuestionToHistory(e){clientState.questionHistory=clientState.questionHistory.filter(t=>t!==e),clientState.questionHistory.unshift(e),10<clientState.questionHistory.length&&clientState.questionHistory.pop(),localStorage.setItem("stttvar_q_history",JSON.stringify(clientState.questionHistory))}function updateStatus(e,t="normal",n=3e3){clearTimeout(statusTimeout),elements.status.textContent=e,elements.status.className="status visible "+t,statusTimeout=setTimeout(()=>elements.status.classList.remove("visible","success","error"),n)}function updateCounters(e){let t,n;if("acumulado"===e)t=elements.acumulado.textContent||"",n=elements.acumuladoCounter;else{if("notes"!==e)return;t=elements.notesArea.value||"",n=elements.notesCounter}const o=t.length,a=t.trim().split(/\\s+/).filter(e=>0<e.length);n.textContent = o + ' caracteres | ' + (""===t.trim()?0:a.length) + ' palabras'}function copyText(e,t){const n=document.getElementById(e),o="TEXTAREA"===n.tagName||"INPUT"===n.tagName?n.value:n.textContent;o&&o.trim()?navigator.clipboard.writeText(o).then(()=>{updateStatus("Copiado al portapeles.","success");const e=t.querySelector(".fa-copy"),n=t.querySelector(".fa-check");e&&n&&(e.classList.add("hidden"),n.classList.remove("hidden"),setTimeout(()=>{e.classList.remove("hidden"),n.classList.add("hidden")},2e3))}).catch(e=>{console.error("Error al copiar:",e),updateStatus("Error al copiar.","error")}):updateStatus("Nada que copiar.","error")}function applyZenFontSize(){elements.zenSubtitulo.style.fontSize = clientState.zenFontSize + 'vmin';elements.zenAcumulado.style.fontSize = Math.max(2.2,.4*clientState.zenFontSize) + 'vmin'}function toggleZenMode(){document.body.classList.toggle("zen-active"),document.body.classList.contains("zen-active")&&(document.body.classList.remove("zen-view-acumulado"),elements.zenViewToggleBtn.innerHTML='<i class="fas fa-file-alt"></i>',elements.zenViewToggleBtn.title="Ver Texto Acumulado",clientState.zenFontSize=6,applyZenFontSize())}document.addEventListener("DOMContentLoaded",()=>{updateStatus("Demo cargada","success",1500)}),elements.closeDemoNoticeBtn.addEventListener("click",()=>{elements.demoNoticeOverlay.classList.add("hidden"),runSimulation()}),elements.clearTextBtn.addEventListener("click",()=>{confirm("驴Seguro que quieres borrar la transcripci贸n y las respuestas de la IA? Esto reiniciar谩 la demostraci贸n.")&&(stopSimulation(),fakeAcumuladoText="",transcriptIndex=0,elements.acumulado.textContent="",elements.subtitulo.textContent="Esperando transmisi贸n...",elements.aiResponse.textContent="",elements.aiResponse.classList.add("hidden"),updateCounters("acumulado"),updateStatus("Demostraci贸n reiniciada.","success"),runSimulation())}),elements.chatToggleBtn.addEventListener("click",()=>{elements.chatModalOverlay.classList.add("active"),initializeChat(),elements.chatMessages.scrollTop=elements.chatMessages.scrollHeight,unreadMessageCount=0,elements.unreadBadge.classList.add("hidden")}),elements.closeChatBtn.addEventListener("click",()=>elements.chatModalOverlay.classList.remove("active")),elements.chatSaveNameBtn.addEventListener("click",()=>{const e=elements.chatUsernameInput.value.trim();e?localStorage.setItem("stttvar_username",e):updateStatus("Introduce un nombre.","error"),initializeChat()}),elements.chatUsernameInput.addEventListener("keypress",e=>{"Enter"===e.key&&elements.chatSaveNameBtn.click()}),elements.chatSendBtn.addEventListener("click",()=>sendChatMessage({user:localStorage.getItem("stttvar_username"),message:elements.chatMessageInput.value.trim()})),elements.chatMessageInput.addEventListener("keypress",e=>{"Enter"===e.key&&(e.preventDefault(),elements.chatSendBtn.click())}),elements.shareNotesBtn.addEventListener("click",()=>{const e=localStorage.getItem("stttvar_username"),t=elements.notesArea.value.trim();e?t?sendChatMessage({user:e,isNote:!0,content:t}):updateStatus("No hay apuntes para compartir.","error"):(updateStatus("Define tu nombre en el chat para poder compartir.","error"),elements.chatToggleBtn.click())}),elements.chatMessages.addEventListener("click",e=>{const t=e.target.closest(".view-shared-notes-btn");t&&openSharedNotesModal(t.dataset.notesContent,t.dataset.notesUser)}),elements.closeSharedNotesBtn.addEventListener("click",()=>elements.sharedNotesModalOverlay.classList.remove("active")),elements.idiomaSelect.addEventListener("change",()=>makeRequest("/set_language/"+clientId+"/"+elements.idiomaSelect.value)),elements.idiomaAcumuladoSelect.addEventListener("change",()=>makeRequest("/set_language_acumulado/"+clientId+"/"+elements.idiomaAcumuladoSelect.value)),elements.themeToggle.addEventListener("click",()=>{document.body.classList.toggle("dark-theme");const e=document.body.classList.contains("dark-theme");elements.themeToggle.innerHTML=e?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>'}),elements.settingsBtn.addEventListener("click",()=>elements.settingsModalOverlay.classList.add("active")),elements.closePopupBtn.addEventListener("click",()=>elements.settingsModalOverlay.classList.remove("active")),elements.sendQuestionBtn.addEventListener("click",()=>sendQuestion()),elements.aiQuestion.addEventListener("keypress",e=>{"Enter"===e.key&&sendQuestion()}),elements.notesToggleBtn.addEventListener("click",()=>document.body.classList.toggle("notes-active")),elements.zenModeBtn.addEventListener("click",toggleZenMode),elements.zenCloseBtn.addEventListener("click",toggleZenMode),elements.zenViewToggleBtn.addEventListener("click",()=>{document.body.classList.toggle("zen-view-acumulado");const e=document.body.classList.contains("zen-view-acumulado");elements.zenViewToggleBtn.innerHTML=e?'<i class="fas fa-quote-left"></i>':'<i class="fas fa-file-alt"></i>',elements.zenViewToggleBtn.title=e?"Ver Subt铆tulo":"Ver Transcripci贸n",e&&(elements.zenAcumulado.scrollTop=elements.zenAcumulado.scrollHeight)}),elements.zenFontIncreaseBtn.addEventListener("click",()=>{clientState.zenFontSize<15&&(clientState.zenFontSize+=.5,applyZenFontSize())}),elements.zenFontDecreaseBtn.addEventListener("click",()=>{2<clientState.zenFontSize&&(clientState.zenFontSize-=.5,applyZenFontSize())}),[elements.settingsModalOverlay,elements.chatModalOverlay,elements.sharedNotesModalOverlay].forEach(e=>{e.addEventListener("click",t=>{t.target===e&&e.classList.remove("active")})}),elements.notesArea.addEventListener("input",()=>updateCounters("notes")),elements.exportNotesBtn.addEventListener("click",()=>{const e=elements.notesArea.value;e.trim()?downloadFile(e,"txt","mis_apuntes"):updateStatus("No hay apuntes para exportar.","error")});
                <\/script>
            </body>
            </html>
        `;

        let isDemoLoaded = false;
        function loadDemo() {
            if (!isDemoLoaded && demoIframe) {
                demoIframe.srcdoc = demoHtmlContent;
                isDemoLoaded = true;
            }
        }

        if (openDemoModalBtn && demoModalOverlay && closeDemoModalBtn) {
            openDemoModalBtn.addEventListener('click', () => {
                loadDemo(); // Carga el contenido en el iframe la primera vez que se hace clic
                demoModalOverlay.classList.add('active');
                body.classList.add('modal-active');
            });

            const closeModal = () => {
                demoModalOverlay.classList.remove('active');
                body.classList.remove('modal-active');
            };

            closeDemoModalBtn.addEventListener('click', closeModal);
            demoModalOverlay.addEventListener('click', (e) => {
                if (e.target === demoModalOverlay) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && demoModalOverlay.classList.contains('active')) {
                    closeModal();
                }
            });
        }
    });
</script>
</body>
</html>